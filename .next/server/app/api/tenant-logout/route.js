"use strict";(()=>{var e={};e.id=454,e.ids=[454],e.modules={3524:e=>{e.exports=require("@prisma/client")},2934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4770:e=>{e.exports=require("crypto")},2398:(e,t,n)=>{n.r(t),n.d(t,{originalPathname:()=>g,patchFetch:()=>m,requestAsyncStorage:()=>p,routeModule:()=>c,serverHooks:()=>x,staticGenerationAsyncStorage:()=>d});var r={};n.r(r),n.d(r,{POST:()=>u});var i=n(9303),a=n(8716),o=n(670),s=n(7070),l=n(5456);async function u(e){await (0,l.cI)();let t=e.nextUrl.origin,n=s.NextResponse.redirect(new URL("/login",t));return n.cookies.set("tenant_session","",{path:"/",maxAge:0}),n}let c=new i.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/tenant-logout/route",pathname:"/api/tenant-logout",filename:"route",bundlePath:"app/api/tenant-logout/route"},resolvedPagePath:"C:\\construction\\src\\app\\api\\tenant-logout\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:p,staticGenerationAsyncStorage:d,serverHooks:x}=c,g="/api/tenant-logout/route";function m(){return(0,o.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:d})}},5456:(e,t,n)=>{n.d(t,{Rr:()=>o,cI:()=>s,xB:()=>l});var r=n(1615);n(2023);var i=n(3538);let a="tenant_session";async function o(){let e=await (0,r.cookies)(),t=e.get(a)?.value;if(!t)return null;let[n,o]=t.split(":");if(!n||!o)return null;let s=await i._.user.findFirst({where:{id:n,tenantId:o,isActive:!0,deletedAt:null},select:{id:!0,email:!0,role:!0,tenantId:!0}});return s?{userId:s.id,tenantId:s.tenantId,email:s.email,role:s.role}:null}async function s(){(await (0,r.cookies)()).delete(a)}async function l(){let e=await (0,r.cookies)(),t=e.get("admin_session")?.value;if(!t)return null;let[n]=t.split(":");return n?await i._.admin.findUnique({where:{id:n},select:{id:!0}}):null}},3538:(e,t,n)=>{n.d(t,{_:()=>i});var r=n(3524);let i=globalThis.prisma||new r.PrismaClient({log:["error"]})}};var t=require("../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[276,28,972],()=>n(2398));module.exports=r})();