(()=>{var e={};e.id=926,e.ids=[926],e.modules={3524:e=>{"use strict";e.exports=require("@prisma/client")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4770:e=>{"use strict";e.exports=require("crypto")},9619:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>o}),n(1706),n(606),n(8415),n(5866),n(2029);var s=n(3191),a=n(8716),r=n(7922),i=n.n(r),l=n(5231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);n.d(t,c);let o=["",{children:["(tenant)",{children:["(app)",{children:["clients",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.bind(n,1706)),"C:\\construction\\src\\app\\(tenant)\\(app)\\clients\\new\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(n.bind(n,606)),"C:\\construction\\src\\app\\(tenant)\\(app)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(n.bind(n,8415)),"C:\\construction\\src\\app\\(tenant)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(n.t.bind(n,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(n.bind(n,2029)),"C:\\construction\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(n.t.bind(n,5866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\construction\\src\\app\\(tenant)\\(app)\\clients\\new\\page.tsx"],u="/(tenant)/(app)/clients/new/page",p={require:n,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(tenant)/(app)/clients/new/page",pathname:"/clients/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},9983:(e,t,n)=>{let s={ead3b1e8abc924a60da68edf38127ecb49a83358:()=>Promise.resolve().then(n.bind(n,9563)).then(e=>e.createClientAction)};async function a(e,...t){return(await s[e]()).apply(null,t)}e.exports={ead3b1e8abc924a60da68edf38127ecb49a83358:a.bind(null,"ead3b1e8abc924a60da68edf38127ecb49a83358")}},3757:(e,t,n)=>{Promise.resolve().then(n.bind(n,283))},283:(e,t,n)=>{"use strict";n.d(t,{ClientForm:()=>l});var s=n(326),a=n(962);n(5424);var r=(0,n(6242).$)("ead3b1e8abc924a60da68edf38127ecb49a83358"),i=n(434);function l(){let[e,t]=(0,a.useFormState)(r,null);return(0,s.jsxs)("form",{action:t,className:"max-w-md space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"name",className:"mb-1 block text-sm font-medium text-slate-700",children:"Name"}),s.jsx("input",{id:"name",name:"name",required:!0,className:"input"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"email",className:"mb-1 block text-sm font-medium text-slate-700",children:"Email"}),s.jsx("input",{id:"email",name:"email",type:"email",className:"input"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"phone",className:"mb-1 block text-sm font-medium text-slate-700",children:"Phone"}),s.jsx("input",{id:"phone",name:"phone",type:"tel",className:"input"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"address",className:"mb-1 block text-sm font-medium text-slate-700",children:"Address"}),s.jsx("textarea",{id:"address",name:"address",rows:2,className:"input"})]}),e?.error&&s.jsx("p",{className:"text-sm text-red-600",children:e.error}),(0,s.jsxs)("div",{className:"flex gap-2",children:[s.jsx("button",{type:"submit",className:"btn btn-primary",children:"Add"}),s.jsx(i.default,{href:"/clients",className:"btn btn-secondary",children:"Cancel"})]})]})}},9563:(e,t,n)=>{"use strict";n.r(t),n.d(t,{createClientAction:()=>c});var s=n(7745);n(6461);var a=n(4739),r=n(207),i=n(8516),l=n(4831);async function c(e,t){let n=await (0,i.n)(),s=t.get("name")?.trim(),c=t.get("email")?.trim()||null,o=t.get("phone")?.trim()||null,d=t.get("address")?.trim()||null;if(!s)return{error:"Name required"};await l._.client.create({data:{tenantId:n.id,name:s,email:c,phone:o,address:d}}),(0,r.revalidatePath)("/clients"),(0,a.redirect)("/clients")}(0,n(5723).h)([c]),(0,s.j)("ead3b1e8abc924a60da68edf38127ecb49a83358",c)},1706:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var s=n(9510),a=n(5536);let r=(0,n(8570).createProxy)(String.raw`C:\construction\src\app\(tenant)\(app)\clients\client-form.tsx#ClientForm`);async function i(){return await (0,a.n)(),(0,s.jsxs)("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Add client"}),s.jsx(r,{})]})}},4831:(e,t,n)=>{"use strict";n.d(t,{_:()=>a});var s=n(3524);let a=globalThis.prisma||new s.PrismaClient({log:["error"]})},8516:(e,t,n)=>{"use strict";n.d(t,{n:()=>u});var s=n(4739),a=n(9739),r=n(3973),i=n(4831);async function l(e){let t=await i._.tenant.findUnique({where:{subdomain:e,deletedAt:null},select:{id:!0,subdomain:!0,name:!0,status:!0,subscriptionExpiryAt:!0,trialEndsAt:!0}});if(!t)return null;let n=t.subscriptionExpiryAt??t.trialEndsAt??null;return{id:t.id,slug:t.subdomain,name:t.name,status:t.status,subscriptionExpiryDate:n}}let c=process.env.PLATFORM_DOMAIN||"localhost:3000",o=!c.includes("localhost"),d=`${o?"https":"http"}://${c}`,u=(0,a.cache)(async()=>{let e=await (0,r.headers)(),t=e.get("x-forwarded-host")||e.get("host")||"",n=e.get("x-tenant-slug")||function(e){let t=(process.env.PLATFORM_DOMAIN||"localhost:3000").split(":")[0],n=e.split(":")[0];return n===t||"localhost"===n?null:n.endsWith(`.${t}`)&&n.slice(0,-t.length-1)||null}(t);n||(0,s.redirect)(`${d}/`);let a=await l(n);return a||(0,s.redirect)(`${d}/contact`),!function(e,t){return!("EXPIRED"===e||"SUSPENDED"===e||t&&new Date(t)<new Date)}(a.status,a.subscriptionExpiryDate)&&(0,s.redirect)(`${d}/suspended`),a})}};var t=require("../../../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),s=t.X(0,[819,783,664,442,366,207,746],()=>n(9619));module.exports=s})();